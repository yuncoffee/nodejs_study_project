# 1. API 서버 이해하기
    ※ NodeBird SNS 서비스
        => API : Application Programming Interface
            - 다른 애플리케이션에서 현재 프로그램의 기능을 사용할 수 있게 함.
            - 웹 API : 다른 웹 서비스의 기능을 사용하거나 자원을 가져올 수 있게 함.
            - 다른 사람에게 정보를 제공하고 싶은 부분만 API를 열고, 제공하고 싶지 않은 부분은 API를 만들지 않으면 됨.
            - API에 제한을 걸어 일정 횟수 내에서만 가져가게 할 수도 있음.
            - NodeBird에서는 인증된 사용자에게만 정보 제공
            ===========================================================
            구글 API... YouTube API....
            크롤링할때는 관리가 안되는데 API로 만들면 관리가 가능.
            API를 얼마나 사용했는지 제한, 유료사용자, 유저등급 등등 관리가 가능.
            API 서버는 부가적인거고, 메인이 아님.
            메인서버와 API서버를 분리해야 API서버가 터져도 메인서버는 유지.
            서버는 항상 터지는것을 염두해야함.
            적당히 서버를 나눠야함.

                                <========> NodeBird APP(8001)
            ** 다른 서비스(4000)                               <====> 데이터 베이스
                                <========> NodeBird API(8002)


# 2. API 서버 구조 갖추기

# 3. JWT 토큰 사용하기
    ※ 인증을 위한 JWT
        => NodeBird가 아닌 다른 클라이언트가 데이터를 가져가게 하려면 인증 과정이 필요함.
        => JWT(JSON Web Token)을 사용함
            - 헤더, 페이로드, 시그니처로 구성됨.
            - 헤더 : 토큰 종류오아 해시 알고리즘 정보가 들어있음.
            - 페이로드 : 토큰의 내용물이 인코딩된 부분.
            - 시그니처 : 일련의 문자열로, 시그니처를 통해 토큰이 변조되었는지 여부 확인
            - 시그니처는 JWT 비밀키로 만들어지고, 비밀키가 노출되면 토큰 위조 가능.

            =================================================================
            외국에선 좃으로 불리나봄 키키
            토큰이 존나게 김
            토큰 자체에 데이터를 넣을 수있어서 데이터베이스로 가는 요청이 무리가 안갈 수 있음.

    ※ JWT 사용 시 주의점
        => JWT에 민감한 내용을 넣으면 안됨.
            - 페이로드 내용 볼 수 있음.
            - 그럼에도 사용하는 이유는 토큰 변조가 불가능하고, 내용물이 들어있기 때문
            - 내용물이 들어있으므로 데이터베이스 조회를 하지 않을 수 있음(데이터베이스 조회는 비용이 큰 작업)
            - 노출되어도 좋은 정보만 넣어야 함.
            - 용량이 커서 요청 시 데이터 양이 증가한다는 단점이 있음.
    
    ※ 노드에서 JWT 사용하기
        => JWT 모듈 설치
            - npm i jsonwebtoken
            - JWT 비밀키 .env에 저장
            - JWT 토큰을 검사하는 verifyToken 미들웨어 작성
            - jwt.verify 메서드로 검사 가능(두 번째 인수가 JWT 비밀키)
            - JWT 토큰은 req.headers.authorization에 들어 있음
            - 만료된 JWT 토큰인 경우 419 에러 발생
            - 유효하지 않은 토큰인 경우 401 에러 발생
            - req.decoded에 페이로드를 넣어 다음 미들웨어에서 쓸 수 있게 함.